(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{139:function(t,e,n){},167:function(t,e,n){"use strict";n.r(e);var a,r=n(0),c=n.n(r),i=n(49),s=n.n(i),o=(n(139),n(24)),u=n(38),d=n(32),l=n(31),h=n(116),j=n(221),p=n(114),b=n(16),f=c.a.createContext({authed:!1,user:{},setAuthed:function(t){},setUser:function(t){}}),O=n(23),x=n.n(O),m=n(43),v=n(107),g=n.n(v),y=n(110),P=n.n(y),w=n(109),C=n.n(w),k=n(230),S=n(225),I=n(214),A=n(231),D=n(232),F=n(108),q=n.n(F),L=n(233),T=n(229),U=n(103),B=n.n(U).a.create({baseURL:"http://localhost:8080/api"}),E=n(5),W=n(44),N=n(218),H=n(210),M=n(226),z=n(223),J=n(217),Q=n(222),R=n(228),V=n(2),$={name:"",slug:"",price:0,quantity:0,description:""},G=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state=Object(W.a)({},$),a.handleSubmit=function(t){t.preventDefault(),a.props.onSubmit(Object(W.a)({},a.state),a.resetState)},a.updateField=function(t,e){a.setState(Object(E.a)({},t,e))},a.handleCancel=function(){a.resetState(),a.props.onCancel()},a.resetState=function(){a.setState(Object(W.a)({},$))},a.render=function(){return Object(V.jsxs)("form",{onSubmit:a.handleSubmit,children:[Object(V.jsxs)(N.a,{container:!0,spacing:2,children:[Object(V.jsx)(H.a,{required:!0,id:"filled-required",label:"Nome",variant:"filled",onChange:function(t){return a.updateField("name",t.target.value)},value:a.state.name}),Object(V.jsx)(H.a,{id:"filled-multiline-static",label:"Descri\xe7\xe3o",multiline:!0,value:a.state.description,onChange:function(t){return a.updateField("description",t.target.value)},variant:"filled",rows:4}),Object(V.jsx)(H.a,{label:"Quantidade",id:"filled-start-adornment",sx:{m:1,width:"25ch"},type:"number",inputProps:{min:0},value:a.state.quantity,onChange:function(t){return a.updateField("quantity",t.target.value)},InputProps:{endAdornment:Object(V.jsx)(M.a,{position:"end",children:"Un"})},variant:"filled"}),Object(V.jsxs)(z.a,{fullWidth:!0,sx:{m:1},variant:"filled",children:[Object(V.jsx)(J.a,{htmlFor:"filled-adornment-amount",children:"Pre\xe7o"}),Object(V.jsx)(Q.a,{id:"filled-adornment-amount",value:a.state.price,type:"number",inputProps:{min:0},onChange:function(t){a.updateField("price",t.target.value)},startAdornment:Object(V.jsx)(M.a,{position:"start",children:"$"})})]})]}),Object(V.jsxs)(N.a,{container:!0,spacing:2,children:[Object(V.jsx)(N.a,{item:!0,children:Object(V.jsx)(R.a,{variant:"text",onClick:a.handleCancel,children:"Cancelar"})}),Object(V.jsx)(N.a,{item:!0,children:Object(V.jsx)(R.a,{type:"submit",variant:"contained",children:"Salvar"})})]})]})},a.state=Object(W.a)({},t.initialState),a}return n}(r.Component);G.defaultProps={onSubmit:function(t,e){},onCancel:function(){},initialState:Object(W.a)({},$)},function(t){t[t.productList=0]="productList",t[t.createProduct=1]="createProduct",t[t.editProduct=2]="editProduct"}(a||(a={}));var K=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={products:[],currentProduct:$,fetchProducts:!0,view:a.productList},t.toggleCreate=function(){var e;switch(t.state.view){case a.productList:e=a.createProduct;break;default:e=a.productList}t.setState({view:e})},t.editProduct=function(e){t.setState({view:a.editProduct,currentProduct:e})},t.saveProduct=function(){var e=Object(m.a)(x.a.mark((function e(n,a){var r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getProductHttpAction(),c=t.getActionEndpointFromProductData(n),e.next=4,r(c,n);case 4:e.sent,t.afterSave(),a();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getProducts()}},{key:"componentDidUpdate",value:function(){this.getProducts()}},{key:"getProducts",value:function(){var t=Object(m.a)(x.a.mark((function t(){var e,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.fetchProducts){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,B.get("/product");case 4:e=t.sent,n=e.data,this.setState({products:n,fetchProducts:!1});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deleteProduct",value:function(){var t=Object(m.a)(x.a.mark((function t(e){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.delete("/product/".concat(e));case 2:t.sent,this.setState({fetchProducts:!0});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"afterSave",value:function(){this.state.view===a.editProduct&&this.toggleCreate(),this.setState({fetchProducts:!0})}},{key:"getProductHttpAction",value:function(){switch(this.state.view){case a.editProduct:return B.patch;case a.createProduct:return B.post;default:return function(){}}}},{key:"getActionEndpointFromProductData",value:function(t){var e="/product";return this.state.view===a.editProduct&&(e+="/".concat(t.slug)),e}},{key:"render",value:function(){var t=this,e=[Object(V.jsx)(T.a,{color:"primary","aria-label":"add",onClick:this.toggleCreate,children:this.state.view===a.productList?Object(V.jsx)(g.a,{}):Object(V.jsx)(q.a,{})})];switch(this.state.view){case a.createProduct:e.push(Object(V.jsx)(k.a,{children:Object(V.jsx)(G,{onSubmit:this.saveProduct,onCancel:this.toggleCreate})}));break;case a.editProduct:e.push(Object(V.jsx)(k.a,{children:Object(V.jsx)(G,{initialState:this.state.currentProduct,onSubmit:this.saveProduct,onCancel:this.toggleCreate})}));break;case a.productList:e.push(Object(V.jsx)(k.a,{children:Object(V.jsxs)(S.a,{sx:{width:"100%",bgcolor:"background.paper"},children:[!this.state.products.length&&Object(V.jsx)(I.a,{children:Object(V.jsx)(A.a,{primary:"Nenhum Produto Encontrado"})}),this.state.products.map((function(e,n){return Object(V.jsx)(I.a,{secondaryAction:Object(V.jsxs)(D.a,{children:[Object(V.jsx)(L.a,{edge:"end","aria-label":"edit",onClick:function(){return t.editProduct(e)},children:Object(V.jsx)(C.a,{})}),Object(V.jsx)(L.a,{edge:"end","aria-label":"delete",onClick:function(){return t.deleteProduct(e.slug)},children:Object(V.jsx)(P.a,{})})]}),children:Object(V.jsx)(A.a,{primary:e.name,secondary:(null===e||void 0===e?void 0:e.description)?e.description.substring(0,90)+"...":""})},n)}))]})}))}return e.reverse()}}]),n}(r.Component),X=n(111),Y=n.n(X),Z=n(209),_=n(234),tt=n(220),et=n(227);function nt(){var t=Object(r.useContext)(f).setAuthed,e=function(){var e=Object(m.a)(x.a.mark((function e(n){var a,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=new FormData(n.currentTarget),r={email:a.get("username"),password:a.get("password")},e.next=5,B.post("/auth/login",r);case 5:200===(c=e.sent).status&&t(!0),console.log({response:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)(k.a,{component:"main",maxWidth:"xs",children:[Object(V.jsx)(Z.a,{}),Object(V.jsxs)(_.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(V.jsx)(tt.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(V.jsx)(Y.a,{})}),Object(V.jsx)(et.a,{component:"h1",variant:"h5",children:"Login"}),Object(V.jsxs)(_.a,{component:"form",noValidate:!0,onSubmit:e,sx:{mt:3},children:[Object(V.jsxs)(N.a,{container:!0,spacing:2,children:[Object(V.jsx)(N.a,{item:!0,xs:12,children:Object(V.jsx)(H.a,{required:!0,fullWidth:!0,id:"username",label:"Email",name:"username",autoComplete:"username"})}),Object(V.jsx)(N.a,{item:!0,xs:12,children:Object(V.jsx)(H.a,{required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",id:"password",autoComplete:"new-password"})})]}),Object(V.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Log In"})]})]})]})}var at=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return console.log("context",this.context),this.context.authed?Object(V.jsx)(K,{}):Object(V.jsx)(nt,{})}}]),n}(r.Component);at.contextType=f;var rt=n(15),ct=n(113),it=n.n(ct),st=n(215),ot=n(212),ut=n(235),dt=n(236),lt=n(237),ht=n(238),jt=n(239),pt=n(112),bt=n.n(pt),ft=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={quantity:0,productId:0},a.updateField=function(t,e){a.setState(Object(E.a)({},t,e))},a.handleAddToCart=function(){a.props.onAddToCart(Object(W.a)(Object(W.a)({},a.props.product),{},{quantity:a.state.quantity}))},a.render=function(){var t;return Object(V.jsx)(I.a,{secondaryAction:Object(V.jsxs)(D.a,{children:[Object(V.jsx)(H.a,{label:"Quantidade",id:"filled-start-adornment",sx:{m:1,width:"25ch"},type:"number",inputProps:{min:0},value:a.state.quantity,onChange:function(t){return a.updateField("quantity",parseInt(t.target.value))},InputProps:{endAdornment:Object(V.jsx)(M.a,{position:"end",children:"Un"})},variant:"filled"}),Object(V.jsx)(R.a,{variant:"contained",onClick:a.handleAddToCart,endIcon:Object(V.jsx)(bt.a,{}),children:"Adicionar"})]}),children:Object(V.jsx)(A.a,{primary:a.props.product.name,secondary:(null===(t=a.props.product)||void 0===t?void 0:t.description)?a.props.product.description.substring(0,90)+"...":""})})},a.state.productId=parseInt(t.product.id),a}return n}(r.Component),Ot=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={products:[],cartItems:[],showDialog:!1,showSnackBar:!1,fetchProducts:!0},t.addToCart=function(e){e.quantity&&t.setState({cartItems:[].concat(Object(rt.a)(t.state.cartItems),[{productId:e.id,quantity:parseInt(e.quantity),productName:e.name,price:parseInt(e.price)}]),showSnackBar:!0})},t.buy=Object(m.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state.cartItems.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,B.post("/order",t.state.cartItems);case 4:e.sent,t.setState({showDialog:!0,fetchProducts:!0,cartItems:[]});case 6:case"end":return e.stop()}}),e)}))),t.handleSnackbarClose=function(){t.setState({showSnackBar:!1})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getProducts()}},{key:"componentDidUpdate",value:function(){this.getProducts()}},{key:"getProducts",value:function(){var t=Object(m.a)(x.a.mark((function t(){var e,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.fetchProducts){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,B.get("/product");case 4:e=t.sent,n=e.data,console.log("products",n),this.setState({products:n.filter((function(t){return t.quantity>0})),fetchProducts:!1});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(S.a,{sx:{width:"100%",bgcolor:"background.paper"},children:[!this.state.products.length&&Object(V.jsx)(I.a,{children:Object(V.jsx)(A.a,{primary:"Nenhum Produto Encontrado"})}),this.state.products.map((function(e){return Object(V.jsx)(ft,{product:e,onAddToCart:t.addToCart},e.id)}))]}),Object(V.jsxs)(T.a,{variant:"extended",onClick:this.buy,children:["Finalizar Comprar",Object(V.jsx)(it.a,{})]}),Object(V.jsx)(st.a,{open:this.state.showSnackBar,autoHideDuration:3e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:this.handleSnackbarClose,children:Object(V.jsx)(ot.a,{onClose:this.handleSnackbarClose,severity:"success",sx:{width:"100%"},children:"Item adicionado ao carrinho"})}),Object(V.jsxs)(ut.a,{open:this.state.showDialog,onClose:function(){return t.setState({showDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(V.jsx)(dt.a,{id:"alert-dialog-title",children:"Pedido efetuado!"}),Object(V.jsx)(lt.a,{children:Object(V.jsx)(ht.a,{id:"alert-dialog-description",children:"Seu pedido foi efetuado."})}),Object(V.jsx)(jt.a,{children:Object(V.jsx)(R.a,{onClick:function(){return t.setState({showDialog:!1})},autoFocus:!0,children:"Ok"})})]})]})}}]),n}(r.Component),xt=Object(h.a)(),mt=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={authed:!1,user:{}},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(V.jsx)(f.Provider,{value:{authed:this.state.authed,user:this.state.user,setAuthed:function(e){return t.setState({authed:e})},setUser:function(e){return t.setState({user:e})}},children:Object(V.jsx)(j.a,{theme:xt,children:Object(V.jsx)(p.a,{children:Object(V.jsxs)(b.c,{children:[Object(V.jsx)(b.a,{exact:!0,path:"/admin",children:Object(V.jsx)(at,{})}),Object(V.jsx)(b.a,{exact:!0,path:"/",children:Object(V.jsx)(Ot,{})})]})})})})}}]),n}(r.Component),vt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,240)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))};s.a.render(Object(V.jsx)(c.a.StrictMode,{children:Object(V.jsx)(mt,{})}),document.getElementById("root")),vt()}},[[167,1,2]]]);
//# sourceMappingURL=main.54808acf.chunk.js.map