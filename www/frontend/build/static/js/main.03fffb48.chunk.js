(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{147:function(t,e,n){},148:function(t,e,n){},176:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(52),i=n.n(c),s=(n(147),n(22)),o=n(32),u=n(26),d=n(25),l=n(124),h=n(235),j=n(122),p=n(16),b=r.a.createContext({authed:!1,user:{},setAuthed:function(t){},setUser:function(t){}}),f=(n(148),n(18)),O=n.n(f),x=n(36),m=n(112),v=n.n(m),g=n(117),y=n.n(g),w=n(116),P=n.n(w),k=n(249),C=n(239),S=n(228),I=n(250),F=n(251),A=n(113),D=n.n(A),q=n(252),L=n(248),N=n(108),T=n.n(N).a.create({baseURL:"http://localhost:8080/api"}),B=n(115),E=n.n(B),U=n(5),W=n(46),z=n(232),M=n(224),H=n(240),Q=n(237),R=n(231),J=n(236),V=n(242),$=n(1),G={name:"",slug:"",price:0,quantity:0,description:""},K=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state=Object(W.a)({},G),a.handleSubmit=function(t){t.preventDefault(),a.props.onSubmit(Object(W.a)({},a.state),a.resetState)},a.updateField=function(t,e){a.setState(Object(U.a)({},t,e))},a.handleCancel=function(){a.resetState(),a.props.onCancel()},a.resetState=function(){a.setState(Object(W.a)({},G))},a.render=function(){return Object($.jsxs)("form",{onSubmit:a.handleSubmit,children:[Object($.jsxs)(z.a,{container:!0,spacing:2,children:[Object($.jsx)(M.a,{required:!0,id:"filled-required",label:"Nome",variant:"filled",onChange:function(t){return a.updateField("name",t.target.value)},value:a.state.name}),Object($.jsx)(M.a,{id:"filled-multiline-static",label:"Descri\xe7\xe3o",multiline:!0,value:a.state.description,onChange:function(t){return a.updateField("description",t.target.value)},variant:"filled",rows:4}),Object($.jsx)(M.a,{label:"Quantidade",id:"filled-start-adornment",sx:{m:1,width:"25ch"},type:"number",inputProps:{min:0},value:a.state.quantity,onChange:function(t){return a.updateField("quantity",t.target.value)},InputProps:{endAdornment:Object($.jsx)(H.a,{position:"end",children:"Un"})},variant:"filled"}),Object($.jsxs)(Q.a,{fullWidth:!0,sx:{m:1},variant:"filled",children:[Object($.jsx)(R.a,{htmlFor:"filled-adornment-amount",children:"Pre\xe7o"}),Object($.jsx)(J.a,{id:"filled-adornment-amount",value:a.state.price,type:"number",inputProps:{min:0},onChange:function(t){a.updateField("price",t.target.value)},startAdornment:Object($.jsx)(H.a,{position:"start",children:"$"})})]})]}),Object($.jsxs)(z.a,{container:!0,spacing:2,children:[Object($.jsx)(z.a,{item:!0,children:Object($.jsx)(V.a,{variant:"text",onClick:a.handleCancel,children:"Cancelar"})}),Object($.jsx)(z.a,{item:!0,children:Object($.jsx)(V.a,{type:"submit",variant:"contained",children:"Salvar"})})]})]})},a.state=Object(W.a)({},t.initialState),a}return n}(a.Component);K.defaultProps={onSubmit:function(t,e){},onCancel:function(){},initialState:Object(W.a)({},G)};var X=n(4),Y=n(245),Z=n(247),_=n(221),tt=n(92),et=n(244),nt=n(246),at=n(243),rt=n(238);function ct(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}var it,st=Object(X.a)(_.a)((function(t){var e,n=t.theme;return e={},Object(U.a)(e,"&.".concat(tt.a.head),{backgroundColor:n.palette.common.black,color:n.palette.common.white}),Object(U.a)(e,"&.".concat(tt.a.body),{fontSize:14}),e})),ot=Object(X.a)(at.a)((function(t){return{"&:nth-of-type(odd)":{backgroundColor:t.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),ut=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={entries:[]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getEntries()}},{key:"getEntries",value:function(){var t=Object(x.a)(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.get("/orders");case 2:e=t.sent,this.setState({entries:e.data});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object($.jsx)(et.a,{className:this.props.className,component:rt.a,children:Object($.jsxs)(Y.a,{sx:{minWidth:700},"aria-label":"customized table",children:[Object($.jsx)(nt.a,{children:Object($.jsxs)(at.a,{children:[Object($.jsx)(st,{children:"Nome"}),Object($.jsx)(st,{align:"right",children:"Pre\xe7o"}),Object($.jsx)(st,{align:"right",children:"Quantidade"}),Object($.jsx)(st,{align:"right",children:"Total"})]})}),Object($.jsx)(Z.a,{children:this.state.entries.map((function(t){return Object($.jsxs)(ot,{children:[Object($.jsx)(st,{component:"th",scope:"row",children:t.productName}),Object($.jsx)(st,{align:"right",children:ct(parseInt((parseInt(t.price)/100).toFixed(2)))}),Object($.jsx)(st,{align:"right",children:t.quantity}),Object($.jsx)(st,{align:"right",children:ct(parseInt((parseInt(t.total)/100).toFixed(2)))})]},t.id)}))})]})})}}]),n}(a.Component),dt=n(114),lt=n.n(dt),ht=n(118),jt=n.n(ht);!function(t){t[t.productList=0]="productList",t[t.createProduct=1]="createProduct",t[t.editProduct=2]="editProduct",t[t.report=3]="report"}(it||(it={}));var pt=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={products:[],currentProduct:G,fetchProducts:!0,view:it.productList},t.toggleCreate=function(){var e;switch(t.state.view){case it.productList:e=it.createProduct;break;default:e=it.productList}t.setState({view:e})},t.editProduct=function(e){t.setState({view:it.editProduct,currentProduct:e})},t.saveProduct=function(){var e=Object(x.a)(O.a.mark((function e(n,a){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getProductHttpAction(),c=t.getActionEndpointFromProductData(n),e.next=4,r(c,n);case 4:e.sent,t.afterSave(),a();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getProducts()}},{key:"componentDidUpdate",value:function(){this.getProducts()}},{key:"getProducts",value:function(){var t=Object(x.a)(O.a.mark((function t(){var e,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.fetchProducts){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,T.get("/product");case 4:e=t.sent,n=e.data,this.setState({products:n,fetchProducts:!1});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deleteProduct",value:function(){var t=Object(x.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.delete("/product/".concat(e));case 2:t.sent,this.setState({fetchProducts:!0});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"afterSave",value:function(){this.state.view===it.editProduct&&this.toggleCreate(),this.setState({fetchProducts:!0})}},{key:"getProductHttpAction",value:function(){switch(this.state.view){case it.editProduct:return T.patch;case it.createProduct:return T.post;default:return function(){}}}},{key:"getActionEndpointFromProductData",value:function(t){var e="/product";return this.state.view===it.editProduct&&(e+="/".concat(t.slug)),e}},{key:"render",value:function(){var t=this,e=[Object($.jsx)(L.a,{color:"primary","aria-label":"add",className:"hideFromPrint",onClick:this.toggleCreate,children:this.state.view===it.productList?Object($.jsx)(v.a,{}):Object($.jsx)(D.a,{})}),Object($.jsx)(L.a,{color:"primary","aria-label":"add",className:"hideFromPrint",onClick:function(){return t.setState({view:t.state.view===it.report?it.productList:it.report})},children:this.state.view===it.report?Object($.jsx)(lt.a,{}):Object($.jsx)(E.a,{})})];switch(this.state.view){case it.createProduct:e.push(Object($.jsx)(k.a,{children:Object($.jsx)(K,{onSubmit:this.saveProduct,onCancel:this.toggleCreate})}));break;case it.editProduct:e.push(Object($.jsx)(k.a,{children:Object($.jsx)(K,{initialState:this.state.currentProduct,onSubmit:this.saveProduct,onCancel:this.toggleCreate})}));break;case it.productList:e.push(Object($.jsx)(k.a,{className:"hideFromPrint",children:Object($.jsxs)(C.a,{sx:{width:"100%",bgcolor:"background.paper"},children:[!this.state.products.length&&Object($.jsx)(S.a,{children:Object($.jsx)(I.a,{primary:"Nenhum Produto Encontrado"})}),this.state.products.map((function(e,n){return Object($.jsx)(S.a,{secondaryAction:Object($.jsxs)(F.a,{children:[Object($.jsx)(q.a,{edge:"end","aria-label":"edit",onClick:function(){return t.editProduct(e)},children:Object($.jsx)(P.a,{})}),Object($.jsx)(q.a,{edge:"end","aria-label":"delete",onClick:function(){return t.deleteProduct(e.slug)},children:Object($.jsx)(y.a,{})})]}),children:Object($.jsx)(I.a,{primary:e.name,secondary:(null===e||void 0===e?void 0:e.description)?e.description.substring(0,90)+"...":""})},n)}))]})}));break;case it.report:e.push(Object($.jsxs)(k.a,{children:[Object($.jsx)(ut,{}),Object($.jsx)(q.a,{edge:"end","aria-label":"edit",className:"hideFromPrint",onClick:function(){return window.print()},children:Object($.jsx)(jt.a,{})})]}))}return e.reverse()}}]),n}(a.Component),bt=n(119),ft=n.n(bt),Ot=n(223),xt=n(253),mt=n(234),vt=n(241);function gt(){var t=Object(a.useContext)(b).setAuthed,e=function(){var e=Object(x.a)(O.a.mark((function e(n){var a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=new FormData(n.currentTarget),r={email:a.get("username"),password:a.get("password")},e.next=5,T.post("/auth/login",r);case 5:200===(c=e.sent).status&&t(!0),console.log({response:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object($.jsxs)(k.a,{component:"main",maxWidth:"xs",children:[Object($.jsx)(Ot.a,{}),Object($.jsxs)(xt.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object($.jsx)(mt.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object($.jsx)(ft.a,{})}),Object($.jsx)(vt.a,{component:"h1",variant:"h5",children:"Login"}),Object($.jsxs)(xt.a,{component:"form",noValidate:!0,onSubmit:e,sx:{mt:3},children:[Object($.jsxs)(z.a,{container:!0,spacing:2,children:[Object($.jsx)(z.a,{item:!0,xs:12,children:Object($.jsx)(M.a,{required:!0,fullWidth:!0,id:"username",label:"Email",name:"username",autoComplete:"username"})}),Object($.jsx)(z.a,{item:!0,xs:12,children:Object($.jsx)(M.a,{required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",id:"password",autoComplete:"new-password"})})]}),Object($.jsx)(V.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Log In"})]})]})]})}var yt=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return console.log("context",this.context),this.context.authed?Object($.jsx)(pt,{}):Object($.jsx)(gt,{})}}]),n}(a.Component);yt.contextType=b;var wt=n(15),Pt=n(121),kt=n.n(Pt),Ct=n(229),St=n(226),It=n(254),Ft=n(255),At=n(256),Dt=n(257),qt=n(258),Lt=n(120),Nt=n.n(Lt),Tt=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={quantity:0,productId:0},a.updateField=function(t,e){a.setState(Object(U.a)({},t,e))},a.handleAddToCart=function(){a.props.onAddToCart(Object(W.a)(Object(W.a)({},a.props.product),{},{quantity:a.state.quantity}))},a.render=function(){var t;return Object($.jsx)(S.a,{secondaryAction:Object($.jsxs)(F.a,{children:[Object($.jsx)(M.a,{label:"Quantidade",id:"filled-start-adornment",sx:{m:1,width:"25ch"},type:"number",inputProps:{min:0},value:a.state.quantity,onChange:function(t){return a.updateField("quantity",parseInt(t.target.value))},InputProps:{endAdornment:Object($.jsx)(H.a,{position:"end",children:"Un"})},variant:"filled"}),Object($.jsx)(V.a,{variant:"contained",onClick:a.handleAddToCart,endIcon:Object($.jsx)(Nt.a,{}),children:"Adicionar"})]}),children:Object($.jsx)(I.a,{primary:a.props.product.name,secondary:(null===(t=a.props.product)||void 0===t?void 0:t.description)?a.props.product.description.substring(0,90)+"...":""})})},a.state.productId=parseInt(t.product.id),a}return n}(a.Component),Bt=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={products:[],cartItems:[],showDialog:!1,showSnackBar:!1,fetchProducts:!0},t.addToCart=function(e){e.quantity&&t.setState({cartItems:[].concat(Object(wt.a)(t.state.cartItems),[{productId:e.id,quantity:parseInt(e.quantity),productName:e.name,price:parseInt(e.price)}]),showSnackBar:!0})},t.buy=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state.cartItems.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,T.post("/order",t.state.cartItems);case 4:e.sent,t.setState({showDialog:!0,fetchProducts:!0,cartItems:[]});case 6:case"end":return e.stop()}}),e)}))),t.handleSnackbarClose=function(){t.setState({showSnackBar:!1})},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getProducts()}},{key:"componentDidUpdate",value:function(){this.getProducts()}},{key:"getProducts",value:function(){var t=Object(x.a)(O.a.mark((function t(){var e,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.fetchProducts){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,T.get("/product");case 4:e=t.sent,n=e.data,console.log("products",n),this.setState({products:n.filter((function(t){return t.quantity>0})),fetchProducts:!1});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(C.a,{sx:{width:"100%",bgcolor:"background.paper"},children:[!this.state.products.length&&Object($.jsx)(S.a,{children:Object($.jsx)(I.a,{primary:"Nenhum Produto Encontrado"})}),this.state.products.map((function(e){return Object($.jsx)(Tt,{product:e,onAddToCart:t.addToCart},e.id)}))]}),Object($.jsxs)(L.a,{variant:"extended",onClick:this.buy,children:["Finalizar Comprar",Object($.jsx)(kt.a,{})]}),Object($.jsx)(Ct.a,{open:this.state.showSnackBar,autoHideDuration:3e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:this.handleSnackbarClose,children:Object($.jsx)(St.a,{onClose:this.handleSnackbarClose,severity:"success",sx:{width:"100%"},children:"Item adicionado ao carrinho"})}),Object($.jsxs)(It.a,{open:this.state.showDialog,onClose:function(){return t.setState({showDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object($.jsx)(Ft.a,{id:"alert-dialog-title",children:"Pedido efetuado!"}),Object($.jsx)(At.a,{children:Object($.jsx)(Dt.a,{id:"alert-dialog-description",children:"Seu pedido foi efetuado."})}),Object($.jsx)(qt.a,{children:Object($.jsx)(V.a,{onClick:function(){return t.setState({showDialog:!1})},autoFocus:!0,children:"Ok"})})]})]})}}]),n}(a.Component),Et=Object(l.a)(),Ut=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={authed:!1,user:{}},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this;return Object($.jsx)(b.Provider,{value:{authed:this.state.authed,user:this.state.user,setAuthed:function(e){return t.setState({authed:e})},setUser:function(e){return t.setState({user:e})}},children:Object($.jsx)(h.a,{theme:Et,children:Object($.jsx)(j.a,{children:Object($.jsxs)(p.c,{children:[Object($.jsx)(p.a,{exact:!0,path:"/admin",children:Object($.jsx)(yt,{})}),Object($.jsx)(p.a,{exact:!0,path:"/",children:Object($.jsx)(Bt,{})})]})})})})}}]),n}(a.Component),Wt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,259)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))};i.a.render(Object($.jsx)(r.a.StrictMode,{children:Object($.jsx)(Ut,{})}),document.getElementById("root")),Wt()}},[[176,1,2]]]);
//# sourceMappingURL=main.03fffb48.chunk.js.map